{
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kim-ahyoon/Z_Class/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kim-ahyoon/Z_Class\",\"filename\":\"/Users/kim-ahyoon/Z_Class/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kim-ahyoon/Z_Class\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"proposal-class-properties\",\"visitor\":{\"PrivateName\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"proposal-private-methods\",\"visitor\":{\"PrivateName\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.8": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kim-ahyoon/Z_Class/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kim-ahyoon/Z_Class",
      "filename": "/Users/kim-ahyoon/Z_Class/src/server.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kim-ahyoon/Z_Class",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "proposal-class-properties",
          "visitor": {
            "PrivateName": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "proposal-private-methods",
          "visitor": {
            "PrivateName": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "proposal-numeric-separator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "NumericLiteral": {
              "enter": [
                null
              ]
            },
            "BigIntLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-parameters",
          "visitor": {
            "_exploded": true,
            "_verified": true,
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-object-rest-spread",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "CatchClause": {
              "enter": [
                null
              ]
            },
            "AssignmentExpression": {
              "enter": [
                null
              ]
            },
            "ArrayPattern": {
              "enter": [
                null
              ]
            },
            "ObjectExpression": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            },
            "ForInStatement": {
              "enter": [
                null
              ]
            },
            "ForOfStatement": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-dotall-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-named-capturing-groups-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-async-to-generator",
          "visitor": {
            "_exploded": true,
            "_verified": true,
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-exponentiation-operator",
          "visitor": {
            "AssignmentExpression": {
              "enter": [
                null
              ]
            },
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-template-literals",
          "visitor": {
            "TaggedTemplateExpression": {
              "enter": [
                null
              ]
            },
            "TemplateLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-literals",
          "visitor": {
            "NumericLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-function-name",
          "visitor": {
            "FunctionExpression": {
              "exit": [
                null
              ]
            },
            "ObjectProperty": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-arrow-functions",
          "visitor": {
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-block-scoped-functions",
          "visitor": {
            "BlockStatement": {
              "enter": [
                null
              ]
            },
            "SwitchCase": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-classes",
          "visitor": {
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-object-super",
          "visitor": {
            "ObjectExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-shorthand-properties",
          "visitor": {
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ObjectProperty": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-duplicate-keys",
          "visitor": {
            "ObjectExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-computed-properties",
          "visitor": {
            "ObjectExpression": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-for-of",
          "visitor": {
            "ForOfStatement": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-sticky-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-unicode-escapes",
          "visitor": {
            "Identifier": {
              "enter": [
                null
              ]
            },
            "TemplateElement": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "StringLiteral": {
              "enter": [
                null
              ]
            },
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-unicode-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-spread",
          "visitor": {
            "ArrayExpression": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "NewExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-destructuring",
          "visitor": {
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "CatchClause": {
              "enter": [
                null
              ]
            },
            "AssignmentExpression": {
              "enter": [
                null
              ]
            },
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "ForInStatement": {
              "enter": [
                null
              ]
            },
            "ForOfStatement": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-block-scoping",
          "visitor": {
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "CatchClause": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "BlockStatement": {
              "enter": [
                null
              ]
            },
            "SwitchStatement": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "_verified": true,
            "DoWhileStatement": {
              "enter": [
                null
              ]
            },
            "ForInStatement": {
              "enter": [
                null
              ]
            },
            "ForStatement": {
              "enter": [
                null
              ]
            },
            "WhileStatement": {
              "enter": [
                null
              ]
            },
            "ForOfStatement": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-typeof-symbol",
          "visitor": {
            "UnaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "BlockStatement": {
              "enter": [
                null
              ]
            },
            "CatchClause": {
              "enter": [
                null
              ]
            },
            "DoWhileStatement": {
              "enter": [
                null
              ]
            },
            "ForInStatement": {
              "enter": [
                null
              ]
            },
            "ForStatement": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "SwitchStatement": {
              "enter": [
                null
              ]
            },
            "WhileStatement": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null
              ]
            },
            "ForOfStatement": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            },
            "StaticBlock": {
              "enter": [
                null
              ]
            },
            "TSModuleBlock": {
              "enter": [
                null
              ]
            },
            "AssignmentPattern": {
              "enter": [
                null
              ]
            },
            "ArrayPattern": {
              "enter": [
                null
              ]
            },
            "ObjectPattern": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-new-target",
          "visitor": {
            "MetaProperty": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "regenerator-transform",
          "visitor": {
            "_exploded": true,
            "_verified": true,
            "ObjectMethod": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "FunctionDeclaration": {
              "exit": [
                null
              ]
            },
            "FunctionExpression": {
              "exit": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "exit": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-member-expression-literals",
          "visitor": {
            "MemberExpression": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-property-literals",
          "visitor": {
            "ObjectProperty": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-reserved-words",
          "visitor": {
            "_exploded": true,
            "_verified": true,
            "Identifier": {
              "enter": [
                null,
                null
              ]
            },
            "JSXIdentifier": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kim-ahyoon/Z_Class/src/server.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "exportNamespaceFrom",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/kim-ahyoon/Z_Class/src/server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kim-ahyoon/Z_Class/src/",
        "sourceFileName": "server.js",
        "jsescOption": {
          "minimal": false
        }
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _http = _interopRequireDefault(require(\"http\"));\n\nvar _socket2 = _interopRequireDefault(require(\"socket.io\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _wrtc = _interopRequireDefault(require(\"wrtc\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n// test\nvar app = (0, _express[\"default\"])();\napp.engine(\"html\", require(\"ejs\").renderFile);\napp.set(\"views\", __dirname + \"/public/views\");\napp.set(\"view engine\", \"ejs\");\napp.use(\"/public\", _express[\"default\"][\"static\"](__dirname + \"/public\"));\napp.get(\"/\", function (req, res) {\n  return res.render(\"main.html\");\n});\napp.get(\"/sign_up.html\", function (req, res) {\n  return res.render(\"sign_up.html\");\n});\napp.get(\"/home\", function (req, res) {\n  return res.render(\"home.html\");\n});\n\nvar httpServer = _http[\"default\"].createServer(app);\n\nvar wsServer = (0, _socket2[\"default\"])(httpServer);\nhttpServer.listen(3000);\nvar sockets = []; // 연결된 socket들을 저장하는 배열\n\nvar userStreams = {}; // sendPC로부터 받아온 stream을 저장\n\nvar pcConfig = {\n  iceServers: [{\n    urls: [\"stun:stun.l.google.com:19302\", \"stun:stun1.l.google.com:19302\", \"stun:stun2.l.google.com:19302\", \"stun:stun3.l.google.com:19302\", \"stun:stun4.l.google.com:19302\"]\n  }]\n};\nwsServer.on(\"connection\", function (socket) {\n  // 초기화\n  userStreams[socket.id] = new _wrtc[\"default\"].MediaStream();\n  socket.sendPCs = [];\n  socket.on(\"signUp_getPic\", function (_data, _i) {\n    console.log(\"data 받음\");\n\n    _fs[\"default\"].writeFile(\"pic\".concat(_i, \".png\"), _data, function (_err) {});\n  }); // client의 offer 받고 answer 보냄\n\n  socket.on(\"sendOffer\", /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_offer) {\n      var answer;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              sockets.push(socket);\n              console.log(\"send offer 받음\");\n              socket.receivePC = new _wrtc[\"default\"].RTCPeerConnection(pcConfig);\n\n              socket.receivePC.onicecandidate = function (_data) {\n                console.log(\"send ice candidate 생성\");\n\n                if (_data.candidate) {\n                  console.log(\"send ice candidate 송신\");\n                  socket.emit(\"sendIce\", _data.candidate);\n                }\n              };\n\n              socket.receivePC.ontrack = function (_data) {\n                console.log(\"데이터 받음\");\n                /*\n                if (_data.track.kind === \"audio\") {\n                  socket.audioTrack = _data.track;\n                  console.log(\"audio 트랙 넣음\");\n                } else if (_data.track.kind === \"video\") {\n                  socket.videoTrack = _data.track;\n                  console.log(\"video 트랙 넣음\");\n                }\n                */\n                //stream에 track 추가\n\n                userStreams[socket.id].addTrack(_data.track); // 데이터 넣는 것을 완료한 뒤에 기존 접속자에게 새로운 접속자의 mediastream을 받을 연결 생성\n\n                socket.to(\"Class\").emit(\"newUserJoined\", socket.id); // 기존 접속자들의 영상 얻기\n\n                sockets.filter(function (_socket) {\n                  return _socket.id !== socket.id;\n                }).forEach(function (_socket) {\n                  socket.emit(\"addOldUser\", _socket.id);\n                });\n              };\n\n              _context.next = 8;\n              return socket.receivePC.setRemoteDescription(_offer);\n\n            case 8:\n              _context.next = 10;\n              return socket.receivePC.createAnswer({\n                offerToReceiveAudio: true,\n                offerToReceiveVideo: true\n              });\n\n            case 10:\n              answer = _context.sent;\n              _context.next = 13;\n              return socket.receivePC.setLocalDescription(answer);\n\n            case 13:\n              console.log(\"send answer 보냄\");\n              socket.emit(\"sendAnswer\", answer);\n              socket.join(\"Class\");\n              _context.next = 21;\n              break;\n\n            case 18:\n              _context.prev = 18;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 18]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  socket.on(\"sendIce\", function (_candidate) {\n    console.log(\"send ice candidate 받음\");\n    socket.receivePC.addIceCandidate(_candidate);\n  });\n  socket.on(\"receiveOffer\", /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(_offer, _id) {\n      var tempPC, answer;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              console.log(\"receive offer 받음\");\n              tempPC = {\n                pc: new _wrtc[\"default\"].RTCPeerConnection(pcConfig),\n                stream: new _wrtc[\"default\"].MediaStream(),\n                id: _id\n              };\n              socket.sendPCs.push(tempPC);\n\n              tempPC.pc.onicecandidate = function (_data) {\n                console.log(\"receive ice candidate 생성\");\n\n                if (_data.candidate) {\n                  console.log(\"receive ice candidate 송신\");\n                  socket.emit(\"receiveIce\", _data.candidate, _id);\n                }\n              };\n\n              userStreams[_id].getTracks().forEach(function (_track) {\n                tempPC.pc.addTrack(_track);\n              });\n\n              _context2.next = 8;\n              return tempPC.pc.setRemoteDescription(_offer);\n\n            case 8:\n              _context2.next = 10;\n              return tempPC.pc.createAnswer({\n                offerToReceiveAudio: false,\n                offerToReceiveVideo: false\n              });\n\n            case 10:\n              answer = _context2.sent;\n              _context2.next = 13;\n              return tempPC.pc.setLocalDescription(answer);\n\n            case 13:\n              socket.emit(\"receiveAnswer\", answer, _id);\n              console.log(\"receive answer 보냄\");\n              _context2.next = 20;\n              break;\n\n            case 17:\n              _context2.prev = 17;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 17]]);\n    }));\n\n    return function (_x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n  socket.on(\"receiveIce\", function (_candidate, _id) {\n    console.log(\"receive ice candidate 추가\");\n    var temp = socket.sendPCs.find(function (_pc) {\n      return _pc.id === _id;\n    });\n    temp.pc.addIceCandidate(_candidate);\n  });\n  socket.on(\"disconnecting\", function () {\n    sockets = sockets.filter(function (_socket) {\n      return _socket.id !== socket.id;\n    });\n    socket.to(\"Class\").emit(\"userExit\", socket.id);\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJlbmdpbmUiLCJyZXF1aXJlIiwicmVuZGVyRmlsZSIsInNldCIsIl9fZGlybmFtZSIsInVzZSIsImV4cHJlc3MiLCJnZXQiLCJyZXEiLCJyZXMiLCJyZW5kZXIiLCJodHRwU2VydmVyIiwiaHR0cCIsImNyZWF0ZVNlcnZlciIsIndzU2VydmVyIiwibGlzdGVuIiwic29ja2V0cyIsInVzZXJTdHJlYW1zIiwicGNDb25maWciLCJpY2VTZXJ2ZXJzIiwidXJscyIsIm9uIiwic29ja2V0IiwiaWQiLCJ3ZWJSVEMiLCJNZWRpYVN0cmVhbSIsInNlbmRQQ3MiLCJfZGF0YSIsIl9pIiwiY29uc29sZSIsImxvZyIsImZzIiwid3JpdGVGaWxlIiwiX2VyciIsIl9vZmZlciIsInB1c2giLCJyZWNlaXZlUEMiLCJSVENQZWVyQ29ubmVjdGlvbiIsIm9uaWNlY2FuZGlkYXRlIiwiY2FuZGlkYXRlIiwiZW1pdCIsIm9udHJhY2siLCJhZGRUcmFjayIsInRyYWNrIiwidG8iLCJmaWx0ZXIiLCJfc29ja2V0IiwiZm9yRWFjaCIsInNldFJlbW90ZURlc2NyaXB0aW9uIiwiY3JlYXRlQW5zd2VyIiwib2ZmZXJUb1JlY2VpdmVBdWRpbyIsIm9mZmVyVG9SZWNlaXZlVmlkZW8iLCJhbnN3ZXIiLCJzZXRMb2NhbERlc2NyaXB0aW9uIiwiam9pbiIsIl9jYW5kaWRhdGUiLCJhZGRJY2VDYW5kaWRhdGUiLCJfaWQiLCJ0ZW1wUEMiLCJwYyIsInN0cmVhbSIsImdldFRyYWNrcyIsIl90cmFjayIsInRlbXAiLCJmaW5kIiwiX3BjIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBO0FBRUEsSUFBTUEsR0FBRyxHQUFHLDBCQUFaO0FBRUFBLEdBQUcsQ0FBQ0MsTUFBSixDQUFXLE1BQVgsRUFBbUJDLE9BQU8sQ0FBQyxLQUFELENBQVAsQ0FBZUMsVUFBbEM7QUFDQUgsR0FBRyxDQUFDSSxH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QUd6QyxNQUFNLENBQUNJLE9BQVAsQ0FBZXNDLElBQWYsQ0FBb0IsVUFBQ0MsR0FBRDtBQUFBLGFBQU9BLEdBQUcsQ0FBQzFDLEVBQUosS0FBV2tDLEdBQWxCO0FBQUEsS0FBcEIsQ0FBYjtBQUNBTSxJQUFBQSxJQUFJLENBQUNKLEVBQUwsQ0FBUUgsZUFBUixDQUF3QkQsVUFBeEI7QUFDRCxHQUpEO0FBUUFqQyxFQUFBQSxNQUFNLENBQUNELEVBQVAsQ0FBVSxlQUFWLEVBQTBCLFlBQUk7QUFDMUJMLElBQUFBLE9BQU8sR0FBR0EsT0FBTyxDQUFDNkIsTUFBUixDQUFlLFVBQUNDLE9BQUQ7QUFBQSxhQUFXQSxPQUFPLENBQUN2QixFQUFSLEtBQWVELE1BQU0sQ0FBQ0MsRUFBakM7QUFBQSxLQUFmLENBQVY7QUFDQUQsSUFBQUEsTUFBTSxDQUFDc0IsRUFBUCxDQUFVLE9BQVYsRUFBbUJKLElBQW5CLENBQXdCLFVBQXhCLEVBQW9DbEIsTUFBTSxDQUFDQyxFQUEzQztBQUNILEdBSEQ7QUFLRCxDQS9HRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMva2ltLWFoeW9vbi9aX0NsYXNzL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaHR0cCBmcm9tIFwiaHR0cFwiO1xuaW1wb3J0IHNvY2tldElPIGZyb20gXCJzb2NrZXQuaW9cIjtcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgd2ViUlRDIGZyb20gXCJ3cnRjXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5cbi8vIHRlc3RcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAuZW5naW5lKFwiaHRtbFwiLCByZXF1aXJlKFwiZWpzXCIpLnJlbmRlckZpbGUpO1xuYXBwLnNldChcInZpZXdzXCIsIF9fZGlybmFtZSArIFwiL3B1YmxpYy92aWV3c1wiKTtcbmFwcC5zZXQoXCJ2aWV3IGVuZ2luZVwiLCBcImVqc1wiKTtcbmFwcC51c2UoXCIvcHVibGljXCIsIGV4cHJlc3Muc3RhdGljKF9fZGlybmFtZSArIFwiL3B1YmxpY1wiKSk7XG5cbmFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4gcmVzLnJlbmRlcihcIm1haW4uaHRtbFwiKSk7XG5hcHAuZ2V0KFwiL3NpZ25fdXAuaHRtbFwiLCAocmVxLCByZXMpID0+IHJlcy5yZW5kZXIoXCJzaWduX3VwLmh0bWxcIikpO1xuYXBwLmdldChcIi9ob21lXCIsIChyZXEsIHJlcykgPT4gcmVzLnJlbmRlcihcImhvbWUuaHRtbFwiKSk7XG5cbmNvbnN0IGh0dHBTZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xuY29uc3Qgd3NTZXJ2ZXIgPSBzb2NrZXRJTyhodHRwU2VydmVyKTtcblxuaHR0cFNlcnZlci5saXN0ZW4oMzAwMCk7XG5cblxuXG5cbmxldCBzb2NrZXRzID0gW107ICAgICAgICAgICAvLyDsl7DqsrDrkJwgc29ja2V065Ok7J2EIOyggOyepe2VmOuKlCDrsLDsl7RcbmxldCB1c2VyU3RyZWFtcyA9IHt9OyAgICAgICAvLyBzZW5kUEProZzrtoDthLAg67Cb7JWE7JioIHN0cmVhbeydhCDsoIDsnqVcblxuY29uc3QgcGNDb25maWcgPSB7XG4gIGljZVNlcnZlcnM6IFtcbiAgICB7XG4gICAgICB1cmxzOiBbXG4gICAgICAgIFwic3R1bjpzdHVuLmwuZ29vZ2xlLmNvbToxOTMwMlwiLFxuICAgICAgICBcInN0dW46c3R1bjEubC5nb29nbGUuY29tOjE5MzAyXCIsXG4gICAgICAgIFwic3R1bjpzdHVuMi5sLmdvb2dsZS5jb206MTkzMDJcIixcbiAgICAgICAgXCJzdHVuOnN0dW4zLmwuZ29vZ2xlLmNvbToxOTMwMlwiLFxuICAgICAgICBcInN0dW46c3R1bjQubC5nb29nbGUuY29tOjE5MzAyXCIsXG4gICAgICBdLFxuICAgIH0sXG4gIF0sXG59O1xuXG5cbndzU2VydmVyLm9uKFwiY29ubmVjdGlvblwiLCAoc29ja2V0KSA9PiB7XG4gICAgLy8g7LSI6riw7ZmUXG4gICAgdXNlclN0cmVhbXNbc29ja2V0LmlkXSA9IG5ldyB3ZWJSVEMuTWVkaWFTdHJlYW0oKTtcbiAgICBzb2NrZXQuc2VuZFBDcyA9IFtdO1xuXG4gICAgc29ja2V0Lm9uKFwic2lnblVwX2dldFBpY1wiLCAoX2RhdGEsIF9pKT0+e1xuICAgICAgY29uc29sZS5sb2coXCJkYXRhIOuwm+ydjFwiKTtcbiAgICAgIGZzLndyaXRlRmlsZShgcGljJHtfaX0ucG5nYCxfZGF0YSwoX2Vycik9Pnt9KTtcblxuXG4gICAgfSk7XG5cblxuXG4gICAgLy8gY2xpZW507J2YIG9mZmVyIOuwm+qzoCBhbnN3ZXIg67O064OEXG4gICAgc29ja2V0Lm9uKFwic2VuZE9mZmVyXCIsIGFzeW5jIChfb2ZmZXIpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBzb2NrZXRzLnB1c2goc29ja2V0KTtcbiAgICAgIGNvbnNvbGUubG9nKFwic2VuZCBvZmZlciDrsJvsnYxcIik7XG4gICAgICBzb2NrZXQucmVjZWl2ZVBDID0gbmV3IHdlYlJUQy5SVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZyk7XG4gICAgICBzb2NrZXQucmVjZWl2ZVBDLm9uaWNlY2FuZGlkYXRlID0gKF9kYXRhKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwic2VuZCBpY2UgY2FuZGlkYXRlIOyDneyEsVwiKTtcbiAgICAgICAgaWYgKF9kYXRhLmNhbmRpZGF0ZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwic2VuZCBpY2UgY2FuZGlkYXRlIOyGoeyLoFwiKTtcbiAgICAgICAgICBzb2NrZXQuZW1pdChcInNlbmRJY2VcIiwgX2RhdGEuY2FuZGlkYXRlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHNvY2tldC5yZWNlaXZlUEMub250cmFjayA9IChfZGF0YSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIuuNsOydtO2EsCDrsJvsnYxcIik7XG4gICAgICAgIC8qXG4gICAgICAgIGlmIChfZGF0YS50cmFjay5raW5kID09PSBcImF1ZGlvXCIpIHtcbiAgICAgICAgICBzb2NrZXQuYXVkaW9UcmFjayA9IF9kYXRhLnRyYWNrO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiYXVkaW8g7Yq4656ZIOuEo+ydjFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChfZGF0YS50cmFjay5raW5kID09PSBcInZpZGVvXCIpIHtcbiAgICAgICAgICBzb2NrZXQudmlkZW9UcmFjayA9IF9kYXRhLnRyYWNrO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwidmlkZW8g7Yq4656ZIOuEo+ydjFwiKTtcbiAgICAgICAgfVxuICAgICAgICAqL1xuICAgICAgIC8vc3RyZWFt7JeQIHRyYWNrIOy2lOqwgFxuICAgICAgIHVzZXJTdHJlYW1zW3NvY2tldC5pZF0uYWRkVHJhY2soX2RhdGEudHJhY2spO1xuICAgICAgICAvLyDrjbDsnbTthLAg64Sj64qUIOqyg+ydhCDsmYTro4ztlZwg65Kk7JeQIOq4sOyhtCDsoJHsho3snpDsl5Dqsowg7IOI66Gc7Jq0IOygkeyGjeyekOydmCBtZWRpYXN0cmVhbeydhCDrsJvsnYQg7Jew6rKwIOyDneyEsVxuICAgICAgICBzb2NrZXQudG8oXCJDbGFzc1wiKS5lbWl0KFwibmV3VXNlckpvaW5lZFwiLCBzb2NrZXQuaWQpO1xuICAgICAgICAvLyDquLDsobQg7KCR7IaN7J6Q65Ok7J2YIOyYgeyDgSDslrvquLBcbiAgICAgICAgc29ja2V0cy5maWx0ZXIoKF9zb2NrZXQpPT5fc29ja2V0LmlkICE9PXNvY2tldC5pZClcbiAgICAgICAgLmZvckVhY2goKF9zb2NrZXQpPT57XG4gICAgICAgICAgICBzb2NrZXQuZW1pdChcImFkZE9sZFVzZXJcIiwgX3NvY2tldC5pZCk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgYXdhaXQgc29ja2V0LnJlY2VpdmVQQy5zZXRSZW1vdGVEZXNjcmlwdGlvbihfb2ZmZXIpO1xuICAgICAgY29uc3QgYW5zd2VyID0gYXdhaXQgc29ja2V0LnJlY2VpdmVQQy5jcmVhdGVBbnN3ZXIoe1xuICAgICAgICBvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlLFxuICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiB0cnVlLFxuICAgICAgfSk7XG4gICAgICBhd2FpdCBzb2NrZXQucmVjZWl2ZVBDLnNldExvY2FsRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgIGNvbnNvbGUubG9nKFwic2VuZCBhbnN3ZXIg67O064OEXCIpO1xuICAgICAgc29ja2V0LmVtaXQoXCJzZW5kQW5zd2VyXCIsIGFuc3dlcik7XG4gICAgICBzb2NrZXQuam9pbihcIkNsYXNzXCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgfSk7XG5cbiAgc29ja2V0Lm9uKFwic2VuZEljZVwiLCAoX2NhbmRpZGF0ZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwic2VuZCBpY2UgY2FuZGlkYXRlIOuwm+ydjFwiKTtcbiAgICBzb2NrZXQucmVjZWl2ZVBDLmFkZEljZUNhbmRpZGF0ZShfY2FuZGlkYXRlKTtcbiAgfSk7XG5cbiAgc29ja2V0Lm9uKFwicmVjZWl2ZU9mZmVyXCIsIGFzeW5jIChfb2ZmZXIsIF9pZCk9PntcbiAgICB0cnl7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVjZWl2ZSBvZmZlciDrsJvsnYxcIik7XG4gICAgICAgIGNvbnN0IHRlbXBQQyA9IHtwYzogbmV3IHdlYlJUQy5SVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZyksIHN0cmVhbTogbmV3IHdlYlJUQy5NZWRpYVN0cmVhbSgpLGlkOiBfaWR9O1xuICAgICAgICBzb2NrZXQuc2VuZFBDcy5wdXNoKHRlbXBQQyk7XG4gICAgICAgIHRlbXBQQy5wYy5vbmljZWNhbmRpZGF0ZSA9IChfZGF0YSk9PntcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVjZWl2ZSBpY2UgY2FuZGlkYXRlIOyDneyEsVwiKTtcbiAgICAgICAgICAgIGlmIChfZGF0YS5jYW5kaWRhdGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZWNlaXZlIGljZSBjYW5kaWRhdGUg7Iah7IugXCIpO1xuICAgICAgICAgICAgICBzb2NrZXQuZW1pdChcInJlY2VpdmVJY2VcIiwgX2RhdGEuY2FuZGlkYXRlLCBfaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIHVzZXJTdHJlYW1zW19pZF0uZ2V0VHJhY2tzKCkuZm9yRWFjaCgoX3RyYWNrKT0+e1xuICAgICAgICAgICAgdGVtcFBDLnBjLmFkZFRyYWNrKF90cmFjayk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IHRlbXBQQy5wYy5zZXRSZW1vdGVEZXNjcmlwdGlvbihfb2ZmZXIpO1xuICAgICAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCB0ZW1wUEMucGMuY3JlYXRlQW5zd2VyKHtcbiAgICAgICAgICAgIG9mZmVyVG9SZWNlaXZlQXVkaW86IGZhbHNlLFxuICAgICAgICAgICAgb2ZmZXJUb1JlY2VpdmVWaWRlbzogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0ZW1wUEMucGMuc2V0TG9jYWxEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICBzb2NrZXQuZW1pdChcInJlY2VpdmVBbnN3ZXJcIiwgYW5zd2VyLCBfaWQpO1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlY2VpdmUgYW5zd2VyIOuztOuDhFwiKTtcblxuICAgIH1jYXRjaChlKXtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxuICB9KTtcblxuICBzb2NrZXQub24oXCJyZWNlaXZlSWNlXCIsIChfY2FuZGlkYXRlLCBfaWQpPT57XG4gICAgY29uc29sZS5sb2coXCJyZWNlaXZlIGljZSBjYW5kaWRhdGUg7LaU6rCAXCIpO1xuICAgIGNvbnN0IHRlbXAgPSBzb2NrZXQuc2VuZFBDcy5maW5kKChfcGMpPT5fcGMuaWQgPT09IF9pZCk7XG4gICAgdGVtcC5wYy5hZGRJY2VDYW5kaWRhdGUoX2NhbmRpZGF0ZSk7XG4gIH0pO1xuXG5cblxuICBzb2NrZXQub24oXCJkaXNjb25uZWN0aW5nXCIsKCk9PntcbiAgICAgIHNvY2tldHMgPSBzb2NrZXRzLmZpbHRlcigoX3NvY2tldCk9Pl9zb2NrZXQuaWQgIT09IHNvY2tldC5pZClcbiAgICAgIHNvY2tldC50byhcIkNsYXNzXCIpLmVtaXQoXCJ1c2VyRXhpdFwiLCBzb2NrZXQuaWQpO1xuICB9KVxuXG59KTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "app",
        "engine",
        "require",
        "renderFile",
        "set",
        "__dirname",
        "use",
        "express",
        "get",
        "req",
        "res",
        "render",
        "httpServer",
        "http",
        "createServer",
        "wsServer",
        "listen",
        "sockets",
        "userStreams",
        "pcConfig",
        "iceServers",
        "urls",
        "on",
        "socket",
        "id",
        "webRTC",
        "MediaStream",
        "sendPCs",
        "_data",
        "_i",
        "console",
        "log",
        "fs",
        "writeFile",
        "_err",
        "_offer",
        "push",
        "receivePC",
        "RTCPeerConnection",
        "onicecandidate",
        "candidate",
        "emit",
        "ontrack",
        "addTrack",
        "track",
        "to",
        "filter",
        "_socket",
        "forEach",
        "setRemoteDescription",
        "createAnswer",
        "offerToReceiveAudio",
        "offerToReceiveVideo",
        "answer",
        "setLocalDescription",
        "join",
        "_candidate",
        "addIceCandidate",
        "_id",
        "tempPC",
        "pc",
        "stream",
        "getTracks",
        "_track",
        "temp",
        "find",
        "_pc"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/kim-ahyoon/Z_Class/src/",
      "sourcesContent": [
        "import http from \"http\";\nimport socketIO from \"socket.io\";\nimport express from \"express\";\nimport webRTC from \"wrtc\";\nimport fs from \"fs\";\n\n// test\n\nconst app = express();\n\napp.engine(\"html\", require(\"ejs\").renderFile);\napp.set(\"views\", __dirname + \"/public/views\");\napp.set(\"view engine\", \"ejs\");\napp.use(\"/public\", express.static(__dirname + \"/public\"));\n\napp.get(\"/\", (req, res) => res.render(\"main.html\"));\napp.get(\"/sign_up.html\", (req, res) => res.render(\"sign_up.html\"));\napp.get(\"/home\", (req, res) => res.render(\"home.html\"));\n\nconst httpServer = http.createServer(app);\nconst wsServer = socketIO(httpServer);\n\nhttpServer.listen(3000);\n\n\n\n\nlet sockets = [];           // 연결된 socket들을 저장하는 배열\nlet userStreams = {};       // sendPC로부터 받아온 stream을 저장\n\nconst pcConfig = {\n  iceServers: [\n    {\n      urls: [\n        \"stun:stun.l.google.com:19302\",\n        \"stun:stun1.l.google.com:19302\",\n        \"stun:stun2.l.google.com:19302\",\n        \"stun:stun3.l.google.com:19302\",\n        \"stun:stun4.l.google.com:19302\",\n      ],\n    },\n  ],\n};\n\n\nwsServer.on(\"connection\", (socket) => {\n    // 초기화\n    userStreams[socket.id] = new webRTC.MediaStream();\n    socket.sendPCs = [];\n\n    socket.on(\"signUp_getPic\", (_data, _i)=>{\n      console.log(\"data 받음\");\n      fs.writeFile(`pic${_i}.png`,_data,(_err)=>{});\n\n\n    });\n\n\n\n    // client의 offer 받고 answer 보냄\n    socket.on(\"sendOffer\", async (_offer) => {\n    try {\n        sockets.push(socket);\n      console.log(\"send offer 받음\");\n      socket.receivePC = new webRTC.RTCPeerConnection(pcConfig);\n      socket.receivePC.onicecandidate = (_data) => {\n        console.log(\"send ice candidate 생성\");\n        if (_data.candidate) {\n          console.log(\"send ice candidate 송신\");\n          socket.emit(\"sendIce\", _data.candidate);\n        }\n      };\n      socket.receivePC.ontrack = (_data) => {\n        console.log(\"데이터 받음\");\n        /*\n        if (_data.track.kind === \"audio\") {\n          socket.audioTrack = _data.track;\n          console.log(\"audio 트랙 넣음\");\n        } else if (_data.track.kind === \"video\") {\n          socket.videoTrack = _data.track;\n          console.log(\"video 트랙 넣음\");\n        }\n        */\n       //stream에 track 추가\n       userStreams[socket.id].addTrack(_data.track);\n        // 데이터 넣는 것을 완료한 뒤에 기존 접속자에게 새로운 접속자의 mediastream을 받을 연결 생성\n        socket.to(\"Class\").emit(\"newUserJoined\", socket.id);\n        // 기존 접속자들의 영상 얻기\n        sockets.filter((_socket)=>_socket.id !==socket.id)\n        .forEach((_socket)=>{\n            socket.emit(\"addOldUser\", _socket.id);\n        });\n      };\n\n      await socket.receivePC.setRemoteDescription(_offer);\n      const answer = await socket.receivePC.createAnswer({\n        offerToReceiveAudio: true,\n        offerToReceiveVideo: true,\n      });\n      await socket.receivePC.setLocalDescription(answer);\n      console.log(\"send answer 보냄\");\n      socket.emit(\"sendAnswer\", answer);\n      socket.join(\"Class\");\n    } catch (e) {\n      console.log(e);\n    }\n  });\n\n  socket.on(\"sendIce\", (_candidate) => {\n    console.log(\"send ice candidate 받음\");\n    socket.receivePC.addIceCandidate(_candidate);\n  });\n\n  socket.on(\"receiveOffer\", async (_offer, _id)=>{\n    try{\n        console.log(\"receive offer 받음\");\n        const tempPC = {pc: new webRTC.RTCPeerConnection(pcConfig), stream: new webRTC.MediaStream(),id: _id};\n        socket.sendPCs.push(tempPC);\n        tempPC.pc.onicecandidate = (_data)=>{\n            console.log(\"receive ice candidate 생성\");\n            if (_data.candidate) {\n              console.log(\"receive ice candidate 송신\");\n              socket.emit(\"receiveIce\", _data.candidate, _id);\n            }\n          };\n        userStreams[_id].getTracks().forEach((_track)=>{\n            tempPC.pc.addTrack(_track);\n        });\n\n        await tempPC.pc.setRemoteDescription(_offer);\n        const answer = await tempPC.pc.createAnswer({\n            offerToReceiveAudio: false,\n            offerToReceiveVideo: false,\n        });\n        await tempPC.pc.setLocalDescription(answer);\n        socket.emit(\"receiveAnswer\", answer, _id);\n        console.log(\"receive answer 보냄\");\n\n    }catch(e){\n        console.log(e);\n    }\n  });\n\n  socket.on(\"receiveIce\", (_candidate, _id)=>{\n    console.log(\"receive ice candidate 추가\");\n    const temp = socket.sendPCs.find((_pc)=>_pc.id === _id);\n    temp.pc.addIceCandidate(_candidate);\n  });\n\n\n\n  socket.on(\"disconnecting\",()=>{\n      sockets = sockets.filter((_socket)=>_socket.id !== socket.id)\n      socket.to(\"Class\").emit(\"userExit\", socket.id);\n  })\n\n});\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1635580380477
  }
}